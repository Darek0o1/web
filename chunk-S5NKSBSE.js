import{a as U}from"./chunk-JW4DJZHT.js";import{$a as C,Aa as a,Ea as y,Ja as k,Jb as E,Kc as I,Mb as S,Mc as z,N as O,Na as v,Pc as T,U as m,Ua as p,V as g,Ya as n,Yc as N,Za as i,_a as s,ab as u,bb as c,gb as r,hb as b,ib as _,jb as x,kb as h,lb as M,oc as V}from"./chunk-OG74ZS5A.js";import{a as w,g as P}from"./chunk-RA2WU32H.js";function F(d,o){d&1&&(n(0,"div",4),s(1,"i",5),r(2," Cargando informaci\xF3n del usuario... "),i())}function j(d,o){if(d&1&&(n(0,"div",6),s(1,"i",7),r(2),i()),d&2){let e=c();a(2),_(" ",e.error," ")}}function G(d,o){if(d&1){let e=C();n(0,"div",26)(1,"div",27)(2,"input",28),M("ngModelChange",function(t){m(e);let f=c(2);return h(f.usuario.nombre,t)||(f.usuario.nombre=t),g(t)}),i()(),n(3,"div",29)(4,"button",30),u("click",function(){m(e);let t=c(2);return g(t.cancelarEdicion())}),s(5,"i",31),r(6," Cancelar "),i(),n(7,"button",32),u("click",function(){m(e);let t=c(2);return g(t.guardarCambios("nombre"))}),s(8,"i",33),r(9),i()()()}if(d&2){let e=c(2);a(2),x("ngModel",e.usuario.nombre),a(5),p("disabled",e.guardando),a(2),_(" ",e.guardando?"Guardando...":"Guardar"," ")}}function D(d,o){if(d&1){let e=C();n(0,"div",26)(1,"div",27)(2,"input",28),M("ngModelChange",function(t){m(e);let f=c(2);return h(f.usuario.apellido,t)||(f.usuario.apellido=t),g(t)}),i()(),n(3,"div",29)(4,"button",30),u("click",function(){m(e);let t=c(2);return g(t.cancelarEdicion())}),s(5,"i",31),r(6," Cancelar "),i(),n(7,"button",32),u("click",function(){m(e);let t=c(2);return g(t.guardarCambios("apellido"))}),s(8,"i",33),r(9),i()()()}if(d&2){let e=c(2);a(2),x("ngModel",e.usuario.apellido),a(5),p("disabled",e.guardando),a(2),_(" ",e.guardando?"Guardando...":"Guardar"," ")}}function L(d,o){if(d&1){let e=C();n(0,"div",26)(1,"div",27)(2,"input",34),M("ngModelChange",function(t){m(e);let f=c(2);return h(f.usuario.numero,t)||(f.usuario.numero=t),g(t)}),i()(),n(3,"div",29)(4,"button",30),u("click",function(){m(e);let t=c(2);return g(t.cancelarEdicion())}),s(5,"i",31),r(6," Cancelar "),i(),n(7,"button",32),u("click",function(){m(e);let t=c(2);return g(t.guardarCambios("numero"))}),s(8,"i",33),r(9),i()()()}if(d&2){let e=c(2);a(2),x("ngModel",e.usuario.numero),a(5),p("disabled",e.guardando),a(2),_(" ",e.guardando?"Guardando...":"Guardar"," ")}}function Y(d,o){if(d&1){let e=C();n(0,"div",26)(1,"div",27)(2,"input",35),M("ngModelChange",function(t){m(e);let f=c(2);return h(f.usuario.fechaNacimiento,t)||(f.usuario.fechaNacimiento=t),g(t)}),i()(),n(3,"div",29)(4,"button",30),u("click",function(){m(e);let t=c(2);return g(t.cancelarEdicion())}),s(5,"i",31),r(6," Cancelar "),i(),n(7,"button",32),u("click",function(){m(e);let t=c(2);return g(t.guardarCambios("fechaNacimiento"))}),s(8,"i",33),r(9),i()()()}if(d&2){let e=c(2);a(2),x("ngModel",e.usuario.fechaNacimiento),a(5),p("disabled",e.guardando),a(2),_(" ",e.guardando?"Guardando...":"Guardar"," ")}}function A(d,o){if(d&1){let e=C();n(0,"div",8)(1,"div",9)(2,"h1",10),s(3,"i",11),r(4," Configuraci\xF3n de Cuenta "),i()(),n(5,"div",12)(6,"h2",13),s(7,"i",14),r(8," Informaci\xF3n Personal "),i(),n(9,"div",15)(10,"div",16),s(11,"i",17),n(12,"label"),r(13,"Nombre:"),i()(),n(14,"span",18),r(15),i(),n(16,"button",19),u("click",function(){m(e);let t=c();return g(t.toggleEdit("nombre"))}),s(17,"i",20),r(18," Editar "),i(),v(19,G,10,3,"div",21),i(),n(20,"div",15)(21,"div",16),s(22,"i",22),n(23,"label"),r(24,"Apellido:"),i()(),n(25,"span",18),r(26),i(),n(27,"button",19),u("click",function(){m(e);let t=c();return g(t.toggleEdit("apellido"))}),s(28,"i",20),r(29," Editar "),i(),v(30,D,10,3,"div",21),i(),n(31,"div",15)(32,"div",16),s(33,"i",23),n(34,"label"),r(35,"Correo:"),i()(),n(36,"span",18),r(37),i()(),n(38,"div",15)(39,"div",16),s(40,"i",24),n(41,"label"),r(42,"Tel\xE9fono:"),i()(),n(43,"span",18),r(44),i(),n(45,"button",19),u("click",function(){m(e);let t=c();return g(t.toggleEdit("numero"))}),s(46,"i",20),r(47," Editar "),i(),v(48,L,10,3,"div",21),i(),n(49,"div",15)(50,"div",16),s(51,"i",25),n(52,"label"),r(53,"Fecha de nacimiento:"),i()(),n(54,"span",18),r(55),i(),n(56,"button",19),u("click",function(){m(e);let t=c();return g(t.toggleEdit("fechaNacimiento"))}),s(57,"i",20),r(58," Editar "),i(),v(59,Y,10,3,"div",21),i()()()}if(d&2){let e=c();a(15),b(e.usuario.nombre||"No especificado"),a(4),p("ngIf",e.editando==="nombre"),a(7),b(e.usuario.apellido||"No especificado"),a(4),p("ngIf",e.editando==="apellido"),a(7),b(e.usuario.correo||"No especificado"),a(7),b(e.usuario.numero||"No especificado"),a(4),p("ngIf",e.editando==="numero"),a(7),_(" ",e.formatearFecha(e.usuario.fechaNacimiento)," "),a(4),p("ngIf",e.editando==="fechaNacimiento")}}var W=class d{constructor(o){this.usuarioService=o}auth=O(V);uid="";usuario={nombre:"",apellido:"",correo:"",numero:"",fechaNacimiento:""};datosOriginales={};cargando=!0;guardando=!1;error=null;editando=null;ngOnInit(){let o=this.auth.currentUser;o?(this.uid=o.uid,this.obtenerUsuario()):(this.error="Usuario no autenticado.",this.cargando=!1)}obtenerUsuario(){this.cargando=!0,this.error=null,this.usuarioService.obtenerUsuarioPorUid(this.uid).subscribe({next:o=>{this.usuario=w({},o),this.datosOriginales=w({},o),this.cargando=!1},error:o=>{console.error(o),this.error="Error al cargar los datos del usuario.",this.cargando=!1}})}toggleEdit(o){this.editando=this.editando===o?null:o}cancelarEdicion(){this.editando&&(this.usuario[this.editando]=this.datosOriginales[this.editando]),this.editando=null}guardarCambios(o){return P(this,null,function*(){if(!(!this.usuario||!this.editando)){this.guardando=!0,this.error=null;try{let e=this.usuario[o];yield this.usuarioService.actualizarUsuario(this.uid,{[o]:e}),this.datosOriginales[o]=e,this.editando=null}catch(e){console.error(e),this.error="Error al guardar los cambios.",this.usuario[o]=this.datosOriginales[o]}finally{this.guardando=!1}}})}formatearFecha(o){if(!o)return"No especificado";try{return new Date(o).toLocaleDateString("es-PE",{day:"2-digit",month:"2-digit",year:"numeric"})}catch{return"Formato inv\xE1lido"}}getLabel(o){return{nombre:"Nombre",apellido:"Apellido",numero:"Tel\xE9fono",fechaNacimiento:"Fecha de nacimiento"}[o]||o}getInputType(o){return o==="fechaNacimiento"?"date":o==="numero"?"tel":"text"}static \u0275fac=function(e){return new(e||d)(y(U))};static \u0275cmp=k({type:d,selectors:[["app-configuracion-cuenta"]],decls:4,vars:3,consts:[[1,"account-settings-container"],["class","loading-message",4,"ngIf"],["class","error-message",4,"ngIf"],["class","settings-content",4,"ngIf"],[1,"loading-message"],[1,"fas","fa-spinner","fa-spin"],[1,"error-message"],[1,"fas","fa-exclamation-triangle"],[1,"settings-content"],[1,"settings-header"],[1,"section-title"],[1,"fas","fa-cog","icon"],[1,"account-info-card"],[1,"card-title"],[1,"fas","fa-user","icon"],[1,"info-row"],[1,"info-label"],[1,"fas","fa-user-check","field-icon"],[1,"info-value"],[1,"edit-button",3,"click"],[1,"fas","fa-edit","icon"],["class","edit-form",4,"ngIf"],[1,"fas","fa-users","field-icon"],[1,"fas","fa-envelope","field-icon"],[1,"fas","fa-phone","field-icon"],[1,"fas","fa-calendar-alt","field-icon"],[1,"edit-form"],[1,"form-group"],["type","text",1,"form-input",3,"ngModelChange","ngModel"],[1,"form-actions"],[1,"cancel-button",3,"click"],[1,"fas","fa-times","icon"],[1,"save-button",3,"click","disabled"],[1,"fas","fa-check","icon"],["type","tel",1,"form-input",3,"ngModelChange","ngModel"],["type","date",1,"form-input",3,"ngModelChange","ngModel"]],template:function(e,l){e&1&&(n(0,"div",0),v(1,F,3,0,"div",1)(2,j,3,1,"div",2)(3,A,60,9,"div",3),i()),e&2&&(a(),p("ngIf",l.cargando),a(),p("ngIf",l.error&&!l.cargando),a(),p("ngIf",l.usuario&&!l.cargando&&!l.error))},dependencies:[S,E,N,I,z,T],styles:['[_ngcontent-%COMP%]:root{--primary-color: #5a67d8;--primary-hover: #4c51bf;--primary-light: #ebf4ff;--secondary-color: #38b2ac;--accent-color: #9f7aea;--text-color: #2d3748;--text-light: #4a5568;--text-muted: #718096;--border-color: #e2e8f0;--card-bg: #ffffff;--body-bg: #f8fafc;--success-color: #48bb78;--success-hover: #38a169;--danger-color: #f56565;--danger-hover: #e53e3e;--warning-color: #ed8936;--info-color: #4299e1;--shadow-sm: 0 1px 3px rgba(0, 0, 0, .05);--shadow-md: 0 4px 6px rgba(0, 0, 0, .08);--shadow-lg: 0 10px 15px rgba(0, 0, 0, .1);--shadow-xl: 0 20px 25px rgba(0, 0, 0, .12);--border-radius-sm: .375rem;--border-radius-md: .5rem;--border-radius-lg: .75rem;--border-radius-xl: 1rem;--transition-fast: all .15s ease;--transition-normal: all .3s ease;--transition-slow: all .5s ease}*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}body[_ngcontent-%COMP%]{font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;background:var(--body-bg);min-height:100vh;padding:2rem 1rem;line-height:1.6;color:var(--text-color)}.account-settings-container[_ngcontent-%COMP%]{max-width:900px;margin:0 auto;background:var(--card-bg);border-radius:var(--border-radius-xl);box-shadow:var(--shadow-xl);overflow:hidden;position:relative;border:1px solid rgba(0,0,0,.05)}.account-settings-container[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;right:0;height:6px;background:linear-gradient(90deg,var(--primary-color),var(--accent-color))}.settings-header[_ngcontent-%COMP%]{padding:2.5rem 2rem 2rem;background:var(--card-bg);display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:2rem;border-bottom:1px solid var(--border-color);position:relative}.section-title[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;color:var(--text-color);display:flex;align-items:center;gap:.75rem;margin:0}.section-title[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{color:var(--primary-color);width:1.8rem;height:1.8rem}.user-avatar[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1rem;position:relative}.avatar-wrapper[_ngcontent-%COMP%]{position:relative;cursor:pointer;transition:var(--transition-normal);width:120px;height:120px}.avatar-wrapper[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.avatar-wrapper[_ngcontent-%COMP%]:hover   .avatar-overlay[_ngcontent-%COMP%]{opacity:1}.avatar-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%;object-fit:cover;border:4px solid var(--primary-color);box-shadow:var(--shadow-lg)}.avatar-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#0009;border-radius:50%;display:flex;align-items:center;justify-content:center;opacity:0;transition:var(--transition-normal)}.avatar-overlay[_ngcontent-%COMP%]   .camera-icon[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem}.avatar-upload-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color),var(--accent-color));color:#fff;border:none;padding:.6rem 1.2rem;border-radius:var(--border-radius-md);font-size:.9rem;font-weight:500;cursor:pointer;display:flex;align-items:center;gap:.5rem;transition:var(--transition-fast);box-shadow:var(--shadow-sm)}.avatar-upload-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--shadow-md);background:linear-gradient(135deg,var(--primary-hover),var(--accent-color))}.avatar-upload-btn[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:.9rem}.account-info-card[_ngcontent-%COMP%]{margin:0;padding:2rem;border-bottom:1px solid var(--border-color)}.account-info-card[_ngcontent-%COMP%]:last-of-type{border-bottom:none}.card-title[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:600;color:var(--text-color);margin-bottom:1.5rem;display:flex;align-items:center;gap:.75rem;padding-bottom:.75rem;border-bottom:2px solid var(--border-color)}.card-title[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{color:var(--primary-color);font-size:1.3rem}.info-row[_ngcontent-%COMP%]{display:flex;align-items:center;padding:1.25rem 0;border-bottom:1px solid var(--border-color);gap:1rem;transition:var(--transition-fast)}.info-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.info-row[_ngcontent-%COMP%]:hover{background:var(--primary-light);margin:0 -1rem;padding-left:1rem;padding-right:1rem;border-radius:var(--border-radius-md)}.info-label[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;gap:.75rem;min-width:0}.info-label[_ngcontent-%COMP%]   .field-icon[_ngcontent-%COMP%]{color:var(--primary-color);font-size:1.1rem;flex-shrink:0}.info-label[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:var(--text-color);font-size:.95rem}.info-value[_ngcontent-%COMP%]{flex:1.5;color:var(--text-light);font-size:.95rem;min-width:0}.info-value.password-value[_ngcontent-%COMP%]{font-family:monospace;letter-spacing:.1em}.tooltip[_ngcontent-%COMP%]{position:relative;display:inline-block}.tooltip[_ngcontent-%COMP%]   .tooltip-icon[_ngcontent-%COMP%]{color:var(--text-muted);cursor:help;font-size:1rem;transition:var(--transition-fast)}.tooltip[_ngcontent-%COMP%]   .tooltip-icon[_ngcontent-%COMP%]:hover{color:var(--primary-color)}.tooltip[_ngcontent-%COMP%]   .tooltip-text[_ngcontent-%COMP%]{visibility:hidden;width:220px;background:var(--text-color);color:#fff;text-align:center;border-radius:var(--border-radius-md);padding:.5rem;position:absolute;z-index:1000;bottom:125%;left:50%;margin-left:-110px;opacity:0;transition:var(--transition-fast);font-size:.8rem;box-shadow:var(--shadow-lg)}.tooltip[_ngcontent-%COMP%]   .tooltip-text[_ngcontent-%COMP%]:after{content:"";position:absolute;top:100%;left:50%;margin-left:-5px;border-width:5px;border-style:solid;border-color:var(--text-color) transparent transparent transparent}.tooltip[_ngcontent-%COMP%]:hover   .tooltip-text[_ngcontent-%COMP%]{visibility:visible;opacity:1}.edit-button[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--primary-color),var(--accent-color));color:#fa0000;border:none;padding:.6rem 1.2rem;border-radius:var(--border-radius-md);cursor:pointer;font-weight:500;font-size:.9rem;display:flex;align-items:center;gap:.5rem;transition:var(--transition-fast);box-shadow:var(--shadow-sm);flex-shrink:0}.edit-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--shadow-md);background:linear-gradient(135deg,var(--primary-hover),var(--accent-color))}.edit-button.secondary[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--text-muted),var(--text-light))}.edit-button.secondary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,var(--text-light),var(--text-color))}.edit-button[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:.9rem}.security-section[_ngcontent-%COMP%]{background:#f5656508;border-radius:var(--border-radius-md);padding:1.5rem;margin-top:1rem;border:1px solid rgba(245,101,101,.1)}.security-title[_ngcontent-%COMP%]{color:var(--danger-color);font-weight:600;margin-bottom:1rem;display:flex;align-items:center;gap:.5rem}.action-buttons[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem;padding:2rem;background:#086dd3cc;border-top:1px solid var(--border-color)}.save-button[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--success-color),var(--success-hover));color:#2fc908;border:none;padding:.875rem 1.75rem;border-radius:var(--border-radius-md);font-weight:600;cursor:pointer;display:flex;align-items:center;gap:.5rem;transition:var(--transition-fast);box-shadow:var(--shadow-md);font-size:.95rem}.save-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--shadow-lg)}.save-button[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:1rem}.cancel-button[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--danger-color),var(--danger-hover));color:#f02525;border:none;padding:.875rem 1.75rem;border-radius:var(--border-radius-md);font-weight:600;cursor:pointer;display:flex;align-items:center;gap:.5rem;transition:var(--transition-fast);box-shadow:var(--shadow-md);font-size:.95rem}.cancel-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:var(--shadow-lg)}.cancel-button[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:1rem}.edit-form[_ngcontent-%COMP%]{display:block;padding:1rem;background:var(--primary-light);border-radius:var(--border-radius-md);margin-top:1rem;animation:_ngcontent-%COMP%_fadeIn .3s ease-out}.form-group[_ngcontent-%COMP%]{margin-bottom:1.25rem}.form-label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:500;color:var(--text-color)}.form-input[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;border:1px solid var(--border-color);border-radius:var(--border-radius-md);font-size:.95rem;transition:var(--transition-fast)}.form-input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 3px #5a67d81a}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_pulse{0%,to{transform:scale(1)}50%{transform:scale(1.05)}}@media (max-width: 768px){body[_ngcontent-%COMP%]{padding:1rem .5rem}.account-settings-container[_ngcontent-%COMP%]{margin:0;border-radius:var(--border-radius-lg)}.settings-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;text-align:left;padding:1.5rem 1.5rem 2rem;gap:1.5rem}.section-title[_ngcontent-%COMP%]{font-size:1.5rem}.user-avatar[_ngcontent-%COMP%]{flex-direction:row;align-items:center;gap:1.5rem;width:100%}.user-avatar[_ngcontent-%COMP%]   .avatar-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px;height:80px}.account-info-card[_ngcontent-%COMP%]{padding:1.5rem}.info-row[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:.75rem;padding:1rem 0}.info-row[_ngcontent-%COMP%]:hover{margin:0;padding:1rem 0}.info-label[_ngcontent-%COMP%]{flex:none;justify-content:flex-start}.info-value[_ngcontent-%COMP%]{flex:none;padding-left:2rem;margin-bottom:.5rem}.edit-button[_ngcontent-%COMP%]{align-self:flex-end;margin-top:.5rem}.action-buttons[_ngcontent-%COMP%]{flex-direction:column;padding:1.5rem;gap:.75rem}.save-button[_ngcontent-%COMP%], .cancel-button[_ngcontent-%COMP%]{width:100%;justify-content:center}}@media (max-width: 480px){.settings-header[_ngcontent-%COMP%]{padding:1.5rem 1rem 2rem}.section-title[_ngcontent-%COMP%]{font-size:1.4rem}.user-avatar[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.user-avatar[_ngcontent-%COMP%]   .avatar-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:70px;height:70px}.card-title[_ngcontent-%COMP%]{font-size:1.25rem}.info-label[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.9rem}.info-value[_ngcontent-%COMP%]{font-size:.9rem;padding-left:1.5rem}}.editing[_ngcontent-%COMP%]   .static-info[_ngcontent-%COMP%]{display:none}.editing[_ngcontent-%COMP%]   .edit-form[_ngcontent-%COMP%]{display:block}.disabled-field[_ngcontent-%COMP%]{opacity:.7;pointer-events:none}[aria-disabled=true][_ngcontent-%COMP%]{opacity:.6;cursor:not-allowed}.loading[_ngcontent-%COMP%]{position:relative;overflow:hidden}.loading[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(90,103,216,.1),transparent);animation:_ngcontent-%COMP%_shimmer 1.5s infinite}@keyframes _ngcontent-%COMP%_shimmer{0%{left:-100%}to{left:100%}}']})};export{W as ConfiguracionCuentaComponent};
